# PHP App ① レビュー

## 全般

### 以下のaタグのリンクを押下した際にedit.phpの$_GETにどんな値が格納されるか説明してください。

```html
<a href="edit.php?todo_id=123&todo_content=焼肉">更新</a>
```

- $_GET = [
-   'todo_id' => '123',
-   'todo_content' => '焼肉'
- ];
- 上記の連想配列が格納される。


### 以下のフォームの送信ボタンを押下した際にstore.phpの$_POSTにどんな値が格納されるか説明してください。

```html
<form action="store.php" method="post">
    <input type="text" name="id" value="123">
		<textarea　name="content">焼肉</textarea>
    <button type="submit">送信</button>
</form>
```

- $_POST = [
-   'id' => '123',
-   'content' => '焼肉'
- ];
- 上記の連想配列が格納される。


### `require_once()` は何のために記述しているか説明してください。

- 別ファイルの機能を利用するため。
- 一度だけ取り込むことができるので、重複エラーを防げる。


### `savePostedData($post)`は何をしているか説明してください。

- 引数として受け取った$postデータを保存するための処理を行っている。


### `header('location: ./index.php')`は何をしているか説明してください。

- header関数を用いて、リダイレクト先を指定している。
- index.phpへ自動で移動する。


### `getRefererPath()`は何をしているか説明してください。

- ユーザーが現在のページにアクセスする前にいたページ（リファラ）のパスを取得している。


### `connectPdo()` の返り値は何か、またこの記述は何をするための記述か説明してください。

- 返り値は、PDOインスタンス。（ PHPでデータベースと接続して操作を行うための窓口）
- データベースに接続し、データの実行・取得などを行うための記述。


### `try catch`とは何か説明してください。

- エラーや例外が発生したときに安全に処理を続ける仕組み。
- tryブロックにエラーが起こりそうな処理を記述し、エラーが発生したらcatchブロックに移り、エラーメッセージを表示。


### Pdoクラスをインスタンス化する際に`try catch`が必要な理由を説明してください。

- データベース接続が失敗した時にエラーを適切に処理するため。
- 接続時に、サーバーが停止していたり、認証情報が間違っていると、PDOは例外を投げる。
- この例外をcatchで受け取ることで、プログラムが強制終了することを防ぎ、エラーメッセージの表示などがされる。


## 新規作成

### `createTodoData($post)`は何をしているか説明してください。

- 渡された$postデータを使って、新しいTodoリストをデータベースに保存する処理を行う。


## 一覧

### `getTodoList()`の返り値について説明してください。

- データベースから取得したTodoリストの一覧。


### `<?= ?>`は何の省略形か説明してください。

- echoの省略形。


## 更新

### `getSelectedTodo($_GET['id'])`の返り値は何か、またなぜ`$_GET['id']` を引数に渡すのか説明してください。

- 返り値はデータベースから取得したTodoリストの連想配列。（id,content）
- $_GET['id']を引数に渡すことで、どのレコードを操作するかを指定する役割を果たしている。


### `updateTodoData($post)`は何をしているか説明してください。

- Todoリストの内容を更新する関数で、データベースに接続し、sqlを実行して、データベースの該当レコードを更新する。


## 削除

### `deleteTodoData($id)`は何をしているか説明してください。

- Todoリストの内容を論理削除するための関数で、データベースに接続し、sqlを実行して、データベースの該当レコードを更新する。


### `deleted_at`を現在時刻で更新すると一覧画面からToDoが非表示になる理由を説明してください。

- deleted_atを現在時刻で更新することで、そのTODOアイテムは「削除された」とみなされ、一覧画面には表示されなくなる。（deleted_at is nullが表示されるようになってる）


### 今回のように実際のデータを削除せずに非表示にすることで削除されたように扱うことを〇〇削除というか。

- 論理削除


### 実際にデータを削除することを〇〇削除というか。

- 物理削除


### 前問のそれぞれの削除のメリット・デメリットについて説明してください。

* 論理削除
  * メリット
    - データの復元が容易: 削除したデータを簡単に復元できる。データの履歴を保持することができる。
    - 参照整合性の維持: 他のテーブルとリレーションがある場合、参照が壊れることがないため、一貫性を保てる。
  * デメリット
    - データ量の増加: 削除したデータも残るため、データベースのサイズが増大する可能性がある。
    - 管理が煩雑になる: 削除したデータを無視するロジックが必要になるため、クエリが複雑になることがある。
* 物理削除
  * メリット
    - データ量の削減: 不要なデータを完全に削除するため、データベースのサイズが小さくなる。
    - シンプルな管理: データが削除されたら、それに関連するロジックが不要になるため、クエリがシンプルになる。
  * デメリット
    - データの復元が難しい: 一度削除したデータは復元が難しいため、誤削除の場合にデータ損失が発生する。
    - 参照整合性の問題: 他のテーブルから参照しているデータを削除すると、参照が壊れる可能性がある。
